type: object
required:
  - type
  - transactionType
  - transactionDate
properties:
  type:
    $ref: ./EnumVariableIncomesTransactionsCurrentType.yaml
  transactionType:
    $ref: ./EnumVariableIncomesTransactionsCurrentTransactionType.yaml
  typeAdditionalInfo:
    type: string
    description: |
      Informação adicional do tipo de movimentação, para preenchimento no caso de movimentações não delimitadas no domínio.

      [Restrição] Campo a ser preenchido quando houve "OUTROS" em Motivo da movimentação.
    maxLength: 100
    pattern: '[\w\W\s]*'
  transactionDate:
    type: string
    format: date
    description: |
      Data da movimentação.

      [Restrição] Data do pregão: compartilhar movimentos até a data da posição.
    maxLength: 10
    minLength: 10
    pattern: ^(\d{4})-(1[0-2]|0?[1-9])-(3[01]|[12][0-9]|0?[1-9])$
    example: "2018-02-15"
  priceFactor:
    type: number
    format: integer
    description: |
      Fator que indica o número de ações utilizadas para a formação.

      [Restrição] Valor mínimo 1.
    minimum: 1
    example: 100
  transactionUnitPrice:
    type: object
    description: |
      Preço unitário da movimentação: valor da unidade do produto na movimentação do investimento.

      [Restrição] De preenchimento obrigatório quando o motivo da movimentação for compra, venda e aluguéis.
    required:
      - amount
      - currency
    properties:
      amount:
        type: string
        format: double
        maxLength: 20
        pattern: '^\d{1,15}\.\d{2,4}$'
        example: '1000.0004'
      currency:
        $ref: ../business_commons/CurrencyCode.yaml
  transactionQuantity:
    type: string
    format: double
    description: |
      Quantidade de ativos movimentados.

      [Restrição] De preenchimento obrigatório quando o motivo da movimentação for compra, venda e aluguéis.
    maxLength: 24
    pattern: '^\d{1,15}\.\d{2,8}$'
    example: "42.00000025"
  transactionValue:
    type: object
    description: Valor da operação realizada pelo cliente.
    required:
      - amount
      - currency
    properties:
      amount:
        type: string
        format: double
        maxLength: 20
        pattern: '^\d{1,15}\.\d{2,4}$'
        example: '1000.04'
      currency:
        $ref: ../business_commons/CurrencyCode.yaml
  transactionId:
    type: string
    maxLength: 100
    pattern: '^[a-zA-Z0-9][a-zA-Z0-9-]{0,99}$'
    example: 'ABCD2126019929279212650822221989319253344'
    description: Código ou identificador único prestado pela instituição que mantém a representação individual do movimento.
  brokerNoteId:
    type: string
    maxLength: 100
    pattern: '^[a-zA-Z0-9][a-zA-Z0-9-]{0,99}$'
    example: 'XWYZ555019929279212650822221989319252233'
    description: Identificador da nota de negociação.
additionalProperties: false
